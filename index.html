<!DOCTYPE html>
<html>
<head>
<meta charset="shift-jis">
<title>xmas2017</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
  }
  canvas {
    width: 100%;
    height: 100%;
    background: #e6dac5;
  }
</style>
</head>
<body>

<div id="xmas2017"></div>

<script src="three.min.js"></script>
<script src="OrbitControls.js"></script>
<script>
// ▼▼▼ 基本設定 ▼▼▼
var scene = new THREE.Scene(); // シーン作成
var camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 ); // カメラ作成
var renderer = new THREE.WebGLRenderer();
renderer.setSize( window.innerWidth, window.innerHeight ); // キャンバスのサイズ
document.getElementById('xmas2017').appendChild( renderer.domElement ); // #xmas2017にDOM追加
// ▲▲▲ 基本設定 ▲▲▲

var orbit = new THREE.OrbitControls( camera, renderer.domElement );
orbit.enableZoom = false;

renderer.setClearColor(0xe6dac5, 1); // 背景色
camera.position.z = 200; // カメラの距離
// console.log(renderer);

// 支え部分
var baMaterial = new THREE.MeshBasicMaterial({color: 0xd6c4a6});
var cyGeometry = new THREE.CylinderGeometry(50, 50, 25, 100); // 円柱
var cylinder = new THREE.Mesh(cyGeometry, baMaterial); // 円柱セット

scene.add(cylinder);

// ガラス
var customMaterial = new THREE.MeshBasicMaterial({
  color: 0xffffff,
  opacity: 0.1,
  transparent: true,
  blending: 2
});
var spGeometry = new THREE.SphereGeometry(60, 60, 30); // 球
var glow = new THREE.Mesh(spGeometry, customMaterial);
glow.position.x = 0;
glow.position.y = 50;
glow.position.z = 0;
glow.scale.multiplyScalar(1.02);
scene.add(glow);

console.log(customMaterial)

// クリッピング
// var plane = [
// new THREE.Plane(new THREE.Vector3(0, 6.2, 0), -2),
// new THREE.Plane(new THREE.Vector3(0, -1, 0), 0),
// new THREE.Plane(new THREE.Vector3(0, 0, -1), 0)
// ];
// renderer.clippingPlanes.push(plane[0]);
// renderer.clippingPlanes.push(plane[1]);
// renderer.clippingPlanes.push(plane[2]);

// 雪
for ( var i = 0; i < 100; i ++ ) {
  var snowGeometry = new THREE.SphereGeometry(6, 6, 3); // 球
  var object = new THREE.Mesh( snowGeometry, new THREE.MeshBasicMaterial( { color: 0xffffff } ) );
  object.position.x = Math.random() * 800 - 400;
  object.position.y = Math.random() * 800 - 400;
  object.position.z = Math.random() * 800 - 400;
  scene.add(object);
}

// ▼▼▼ アニメーション ▼▼▼
function animate() {
	requestAnimationFrame( animate );
	renderer.render( scene, camera );
}
animate();
// ▲▲▲ アニメーション ▲▲▲

</script>
</body>
</html>